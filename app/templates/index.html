{% extends 'base.html' %}

{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">

<main class="main-content">
    <h1 class="page-title">–ù–∞—à–∏ –ø–∏—Ç–æ–º—Ü—ã</h1>
    
    <div class="animals-grid">
        {% for animal in animals %}
        <div class="animal-card">
            <img src="{{ url_for('static', filename='images/' + get_animal_image_by_id(animal.id).file_name) }}" alt="{{ animal.name }}" class="animal-image">
            <div class="animal-info">
                <div class="animal-name">{{ animal.name }}</div>
                <div class="animal-details">{{ animal.breed }}, {{ animal.age }} –º–µ—Å. {{ animal.gender }}</div>
                <div class="animal-status {% if animal.status == 'available' %}status-available{% elif animal.status == 'reserved' %}status-reserved{% else %}status-transitioning{% endif %}">
                        {% if animal.status == 'available' %}–ò—â–µ—Ç —Ö–æ–∑—è–µ–≤{% elif animal.status == 'reserved' %} –ó–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ: {{ animal.request_count }} {% else %} –û–±—â–∞–µ–º—Å—è —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –≤–ª–∞–¥–µ–ª—å—Ü–µ–º {% endif %}
                </div>
                <div class="description"> {{ animal.description }}</div>
            </div>
            <div class="animal-buttons">
                {% if current_user.is_authenticated %}
                    {% if get_user_role_by_login(current_user.user.login) == "user" or get_user_role_by_login(current_user.user.login) == "moderator" or get_user_role_by_login(current_user.user.login) == "admin" %}
                        <a href="/animal_view/{{animal.id}}"><button class="btn-animal adopt-animal">–ü—Ä–æ—Å–º–æ—Ç—Ä</button></a>
                    {% endif %}
                    {% if get_user_role_by_login(current_user.user.login) == "moderator" or get_user_role_by_login(current_user.user.login) == "admin" %}
                        <a href="/animal_edit/{{animal.id}}"><button class="btn-animal edit-animal">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button></a>
                    {% endif %}
                    {% if get_user_role_by_login(current_user.user.login) == "admin" %}
                        <a href="/animal_delete/{{animal.id}}"><button class="btn-animal delete-animal">–£–¥–∞–ª–∏—Ç—å</button></a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
        {% endfor %}

        
    </div>
    {% if current_user.is_authenticated %}
        {% if get_user_role_by_login(current_user.user.login) == "moderator" or get_user_role_by_login(current_user.user.login) == "admin" %}
        <a href="/requests"><button class="btn-animal add-animal">–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ</button></a>
        {% endif %}
        {% if get_user_role_by_login(current_user.user.login) == "admin" %}
        <a href="/animal_add"><button class="btn-animal add-animal">–î–æ–±–∞–≤–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ</button></a>
        {% endif %}
    {% endif %}
    {% if total_pages > 1 %}
    <div class="pagination">
        {% for page_num in range(1, total_pages + 1) %}
            <a href="{{ url_for('index', page=page_num) }}" 
                class="page-btn {% if page_num == current_page %}active{% endif %}">
                {{ page_num }}
            </a>
        {% endfor %}
    </div>
    {% endif %}
</main>

<div class="shelter-about-compact" id="about">
    <div class="shelter-main">
        <h2>–ü—Ä–∏—é—Ç "–î–æ–º –Ω–∞–¥–µ–∂–¥—ã"</h2>
        <p class="shelter-description">
            –î–∞—Ä–∏–º –≤—Ç–æ—Ä—É—é –∂–∏–∑–Ω—å –±–µ–∑–¥–æ–º–Ω—ã–º –∂–∏–≤–æ—Ç–Ω—ã–º —Å 2009 –≥–æ–¥–∞. 
            –ú—ã —Å–ø–∞—Å–∞–µ–º, –ª–µ—á–∏–º –∏ –Ω–∞—Ö–æ–¥–∏–º –ª—é–±—è—â–∏–µ —Å–µ–º—å–∏ –¥–ª—è —Å–æ–±–∞–∫ –∏ –∫–æ—à–µ–∫.
        </p>
    </div>
    <div class="shelter-contacts">
        <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
        <div class="contact-list">
            <div class="contact-item">
                <span class="contact-icon">üìû</span>
                <span>+7 (495) 123-45-67</span>
            </div>
            <div class="contact-item">
                <span class="contact-icon">‚úâÔ∏è</span>
                <span>shelter@hope.ru</span>
            </div>
            <div class="contact-item">
                <span class="contact-icon">üìç</span>
                <span>–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –î–æ–±—Ä—ã—Ö —Å–µ—Ä–¥–µ—Ü, –¥. 15</span>
            </div>
            <div class="contact-item">
                <span class="contact-icon">üïí</span>
                <span>–ï–∂–µ–¥–Ω–µ–≤–Ω–æ 10:00 - 19:00</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}